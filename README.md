# social_network_system_design
Developing a social network architecture for travelers
System Design of a social network for travelers [System Design course](https://balun.courses/courses/system_design)

## Функциональные требования:
- публикация постов из путешествий с фотографиями, небольшим описанием и привязкой к конкретному месту путешествия;
- оценка и комментарии постов других путешественников;
- подписка на других путешественников, чтобы следить за их активностью;
- поиск популярных мест для путешествий и просмотр постов с этих мест;
- просмотр ленты других путешественников и ленты пользователя, основанной на подписках в обратном хронологическом порядке;
- взаимодействие через мобильные устройства и браузер

## Нефункциональные требования:
- DAU: 10 000 000
- Геораспределенность: страны СНГ
- Отказоустойчивость: недоступна максимум 2 часа в год
- Сезонность: возрастающая нагрузка летом + выходные и праздники (DAU + 30% = 13 000 000)
- 2 секунды отправка поста
- 1 секунда отправка комментария к посту
- 0 секунд поставить оценку посту
- 2 секунды загрузка ленты
- хранение постов всегда
- запись поста в среднем на пользователя 15 постов в год
- запись комментария в среднем на пользователя 2 раза в день
- оценка поста в среднем 10 постов в день
- подписка/отписка в среднем 50 раз в год
- чтение ленты 100 постов в день (10 раз по 10 постов в выдаче)
- чтение комментариев к постам 50 комментариев в день (5 постов по 10 комментариев в выдаче)
- максиммум 10 000 подписок может иметь пользователь
- максимум 3 фотографии на пост
- комментарии и описание постов максимум 2000 символов

## Формат данных JSON
### write (post):
``
  {
    "userId": 88329,
    "title": "Эйфелева башня в Париже",
    "latitude": 48.8584,
    "longitude": 2.2945,
    "content": ["binary500KB", "binary500KB", "binary500KB"]
  }
``
size: 8b + (2000 * 2b) + 8b + 8b + (3 * 500 000b) = 1 504 024b

### write (comment):
``
  {
    "postId": 13129,
    "userId": 7281,
    "comment": "Красиво, скоро приеду"
  }
``
size: 8b + 8b + (2000 * 2b) = 4 016b

### write (like):
``
  {
    "postId": 13129,
    "userId": 7281
  }
``
size: 8b + 8b = 16b

### write (follow):
``
  {
    "authorId": 88329,
    "followerId": 7281,
    "follow": true
  }
``
size: 8b + 8b = 16b

### read (posts):
``
[
  {
    "postId": 13129,
    "authorId": 88329,
    "title": "Эйфелева башня в Париже",
    "latitude": 48.8584,
    "longitude": 2.2945,
    "country": "Франция",
    "city": "Париж",
    "content": ["binary500KB", "binary500KB", "binary500KB"],
    "createdDate": 1739539192
  }
]
``
size: 8b + 8b + (2000 * 2b) + 8b + 8b + (200 * 2b) + (200 * 2b) + (3 * 500 000b) + 8b = 1 504 840b * 10 (постов в выдаче) = 15 048 400b

### read (comments):
``
[
  {
    "commentId": 22817,
    "userId": 7281,
    "title": "Красиво, скоро приеду",
    "createdDate": 1739539192
  }
]
``
size: 8b + 8b + (2000 * 2b) + 8 = 4 024b * 10 = 40 240b

## RPS
- write (post): (13 000 000 * 0,041095890410959) / 86 400sec = 6
- write (comment): (13 000 000 * 2) / 86 400sec = 301
- write (like): (13 000 000 * 10) / 86 400sec = 1 505
- write (follow): (13 000 000 * 0,136986301369863) / 86 400sec = 21
- read (posts): (13 000 000 * 10) / 86 400sec = 1 505
- read (comments): (13 000 000 * 5) / 86 400sec = 3 010

## traffic
- write (post): 6 RPS * 1 504 024b = 9 024 144 b = 9 Mb/sec
- write (comment): 301 RPS * 4 016b = 1 208 816 b = 1,2 Mb/sec
- write (like): 1 505 RPS * 16b = 24 080 b = 0,024 Mb/sec
- write (follow): 21 RPS * 16b = 336 b = 0,0003 Mb/sec
- read (posts): 1 505 RPS * 15 048 400b = 22 647 842 000 b = 22 648 Mb/sec
- read (comments): 3 010 RPS * 40 240b = 121 122 400 b = 121 Mb/sec

- write (all) = 10 Mb/sec
- read (all) = 22 769 Mb = 23 Gb/sec
Преобладает трафик на чтение

## connections
Число одновременных подключений: 13 000 000 * 0,1 = 1 300 000

