# social_network_system_design
Developing a social network architecture for travelers
System Design of a social network for travelers [System Design course](https://balun.courses/courses/system_design)

## Функциональные требования:
- публикация постов из путешествий с фотографиями, небольшим описанием и привязкой к конкретному месту путешествия;
- оценка и комментарии постов других путешественников;
- подписка на других путешественников, чтобы следить за их активностью;
- поиск популярных мест для путешествий и просмотр постов с этих мест;
- просмотр ленты других путешественников и ленты пользователя, основанной на подписках в обратном хронологическом порядке;
- взаимодействие через мобильные устройства и браузер

## Нефункциональные требования:
- DAU: 10 000 000
- Геораспределенность: страны СНГ
- Отказоустойчивость: 99.995
- Сезонность: возрастающая нагрузка летом + выходные и праздники (множитель сезона: 1.3)
- 2 секунды отправка поста
- 1 секунда отправка комментария к посту
- 1 секунда поставить оценку посту
- 2 секунды загрузка ленты
- хранение постов всегда
- запись поста в среднем на пользователя 15 постов в год
- запись комментария в среднем на пользователя 2 раза в день
- оценка поста в среднем 10 постов в день
- подписка/отписка в среднем 50 раз в год
- чтение ленты 100 постов в день (10 раз по 10 постов в выдаче)
- чтение комментариев к постам 50 комментариев в день (5 постов по 10 комментариев в выдаче)
- просмотр лайков к постам 50 лайков в день (5 постов по 10 лайков в выдаче)
- максиммум 10 000 подписок может иметь пользователь
- максимум 3 фотографии на пост
- размер фотографии максимум 500KB
- комментарии и описание постов максимум 2000 символов

## Формат данных JSON
### write (post):
``
  {
    "userId": 88329,
    "title": "Эйфелева башня в Париже",
    "latitude": 48.8584,
    "longitude": 2.2945,
    "content": ["binary500KB", "binary500KB", "binary500KB"]
  }
``
size-media: 3 * 500 000b = 1 500 000b
size-meta: 8b + (2000 * 2b) + 8b + 8b = 4 024b

### write (comment):
``
  {
    "postId": 13129,
    "userId": 7281,
    "comment": "Красиво, скоро приеду"
  }
``
size: 8b + 8b + (2000 * 2b) = 4 016b

### write (like):
``
  {
    "postId": 13129,
    "userId": 7281
  }
``
size: 8b + 8b = 16b

### write (follow):
``
  {
    "authorId": 88329,
    "followerId": 7281,
    "follow": true
  }
``
size: 8b + 8b = 16b

### read (posts):
``
[
  {
    "postId": 13129,
    "authorId": 88329,
    "title": "Эйфелева башня в Париже",
    "latitude": 48.8584,
    "longitude": 2.2945,
    "country": "Франция",
    "city": "Париж",
    "likeCount": 6,
    "content": ["binary500KB", "binary500KB", "binary500KB"],
    "createdDate": 1739539192
  }
]
``
size-media: 3 * 500 000 b = 1 500 000 b * 10 (постов в выдаче) = 15 000 000 b
size-meta: 8b + 8b + (2000 * 2b) + 8b + 8b + (200 * 2b) + (200 * 2b) + 4b + 8b = 4 844 b * 10 (постов в выдаче) = 48 440 b

### read (comments):
``
[
  {
    "id": 22817,
    "userId": 7281,
    "title": "Красиво, скоро приеду",
    "createdDate": 1739539192
  }
]
``
size: 8b + 8b + (2000 * 2b) + 8b = 4 024b * 10 = 40 240b

### read (likes):
``
[
  {
    "id": 22817,
    "userId": 7281,
    "createdDate": 1739539192
  }
]
``
size: 8b + 8b + 8b = 24b * 10 = 240b

## RPS
- write (post - media): (13 000 000 * 0,041095890410959) / 86 400sec = 6
- write (post - meta): (13 000 000 * 0,041095890410959) / 86 400sec = 6
- write (comment): (13 000 000 * 2) / 86 400sec = 301
- write (like): (13 000 000 * 10) / 86 400sec = 1 505
- write (follow): (13 000 000 * 0,136986301369863) / 86 400sec = 21
- read (posts - media): (13 000 000 * 10) / 86 400sec = 1 505
- read (posts - meta): (13 000 000 * 10) / 86 400sec = 1 505
- read (comments): (13 000 000 * 5) / 86 400sec = 3 010
- read (likes): (13 000 000 * 5) / 86 400sec = 3 010

## traffic
- write (post-media): 6 RPS * 1 500 000b = 9 000 000 b = 9 Mb/sec
- write (post-meta): 6 RPS * 4 024b = 24 144 b = 0,024 Mb/sec
- write (comment): 301 RPS * 4 016b = 1 208 816 b = 1,2 Mb/sec
- write (like): 1 505 RPS * 16b = 24 080 b = 0,024 Mb/sec
- write (follow): 21 RPS * 16b = 336 b = 0,0003 Mb/sec
- read (posts-media): 1 505 RPS * 15 000 000b = 22 575 000 000 b = 22 575 Mb/sec
- read (posts-meta): 1 505 RPS * 48 440b = 72 902 200 b = 72 Mb/sec
- read (comments): 3 010 RPS * 40 240b = 121 122 400 b = 121 Mb/sec
- read (likes): 3 010 RPS * 240b = 722 400 b = 0,7 Mb/sec

Преобладает трафик на чтение

## connections
Число одновременных подключений: 13 000 000 * 0,1 = 1 300 000

